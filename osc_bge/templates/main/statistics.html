{% extends 'base.html' %}
{% load static templatehelpers %}
{% block content %}

<div class="ContentsFrame">

	<div class="MainAFrame" id="MainF">

		<div class="MTitle">New Students</div>
		<div class="ListSearch Aright">
			<form method="GET">
				<div>
				From :
				<select class="SearchSelect" name="start_month">
					<option value="">Select Month</option>
                {% if request.GET.start_month  == 'Jan' %}
					<option value="Jan" selected>Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Feb' %}
					<option value="Jan">Jan</option>
					<option value="Feb" selected>Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Mar' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar" selected>Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Apr' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr" selected>Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'May' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May" selected>May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Jun' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun" selected>Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Jul' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul" selected>Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Aug' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug" selected>Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Sep' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep" selected>Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Oct' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct" selected>Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Nov' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov" selected>Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.start_month  == 'Dec' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec" selected>Dec</option>
                {% else %}
                    <option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep" selected>Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% endif %}
				</select>
				&nbsp;&nbsp;
				To :
				<select class="SearchSelect" name="end_month">
					<option value="">Select Month</option>
                {% if request.GET.end_month  == 'Jan' %}
					<option value="Jan" selected>Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Feb' %}
					<option value="Jan">Jan</option>
					<option value="Feb" selected>Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Mar' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar" selected>Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Apr' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr" selected>Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'May' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May" selected>May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Jun' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun" selected>Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Jul' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul" selected>Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Aug' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug" selected>Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Sep' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep" selected>Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Oct' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct" selected>Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Nov' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov" selected>Nov</option>
					<option value="Dec">Dec</option>
                {% elif request.GET.end_month  == 'Dec' %}
					<option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug">Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec" selected>Dec</option>
                {% else %}
                    <option value="Jan">Jan</option>
					<option value="Feb">Feb</option>
					<option value="Mar">Mar</option>
					<option value="Apr">Apr</option>
					<option value="May">May</option>
					<option value="Jun">Jun</option>
					<option value="Jul">Jul</option>
					<option value="Aug" selected>Aug</option>
					<option value="Sep">Sep</option>
					<option value="Oct">Oct</option>
					<option value="Nov">Nov</option>
					<option value="Dec">Dec</option>
                {% endif %}
				</select>
				&nbsp;&nbsp;
				<select class="SearchSelect" name="year" required>
					<option value="">Select Year</option>
					{% for year in year_list %}
                        {% if forloop.counter == 1 and request.GET.year == None %}
                            <option value="{{year}}" selected>{{year}} ~ {{year|add:1}} year</option>
                        {% elif request.GET.year  == year|stringformat:"i" %}
					        <option value="{{year}}" selected>{{year}} ~ {{year|add:1}} year</option>
                        {% else %}
                            <option value="{{year}}">{{year}} ~ {{year|add:1}} year</option>
                        {% endif %}
					{% endfor %}
				</select>

				<select class="SearchSelect" name="program_interested">
					<option value="">Select Program</option>
                {% if request.GET.program_interested  == 'k12' %}
					<option value="k12" selected>Secondary</option>
					<option value="college">College</option>
					<option value="camp">Camp</option>
					<option value="not_specified">Not specified</option>
                {% elif request.GET.program_interested  == 'college' %}
                    <option value="k12">Secondary</option>
					<option value="college" selected>College</option>
					<option value="camp">Camp</option>
					<option value="not_specified">Not specified</option>
                {% elif request.GET.program_interested  == 'camp' %}
                    <option value="k12">Secondary</option>
					<option value="college">College</option>
					<option value="camp" selected>Camp</option>
					<option value="not_specified">Not specified</option>
                {% elif request.GET.program_interested  == 'not_specified' %}
                    <option value="k12">Secondary</option>
					<option value="college">College</option>
					<option value="camp">Camp</option>
					<option value="not_specified" selected>Not specified</option>
                {% else %}
                    <option value="k12" selected>Secondary</option>
					<option value="college">College</option>
					<option value="camp">Camp</option>
					<option value="not_specified">Not specified</option>
                {% endif %}
				</select>
				</div>
				<button type="submit" class="ListSearchButton">Search<button>
			</form>
		</div>

		<div class="AgentFrameL">
			<div class="ListTable">
				<table cellpadding="0" cellspacing="0" border="0">
					<colgroup>
						<col width="180">
						<col>
					</colgroup>
					<tr>
						<th>Agent</th>
						<th>Inquired</th>
						<th>Applied</th>
						<th>Accepted</th>
						<th>Cancelled</th>
						<th>Enrolled</th>
					</tr>
					{% for head in all_agent_heads %}
					<tr>
						<td>{{head.name}}</td>
						<td>{{head.inquired}}</td>
						<td>{{head.applied}}</td>
						<td>{{head.accepted}}</td>
						<td>{{head.cancelled}}</td>
						<td>{{head.enrolled}}</td>
					</tr>
					{% endfor %}
					<tr>
						<td class="TitleColor">Total</td>
						<td class="TitleColor">{{total_inquired}}</td>
						<td class="TitleColor">{{total_applied}}</td>
						<td class="TitleColor">{{total_accepted}}</td>
						<td class="TitleColor">{{total_cancelled}}</td>
						<td class="TitleColor">{{total_enrolled}}</td>
					</tr>
				</table>
			</div><!-- ListTable -->
		</div><!-- AgentFrameL -->

		<script>
		$(document).ready(function(){

			$.ajax({                       // initialize an AJAX request
				url: "/charts/bge/statistics?program={{request.GET.program_interested}}",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
				success: function (data) {   // `data` is the return of the `load_cities` view function
					var months = data.months;
					var result = data.data;
					var array = []
					result.forEach(function(element){
						array.push(
							{
								label: element.agent,
								data: element.data,
								fill:false,
								borderColor: [
									'rgb(' + (Math.floor(Math.random() * 256)) + ',' +
									(Math.floor(Math.random() * 256)) + ',' +
									(Math.floor(Math.random() * 256)) + ',1' + ')',
								],
								borderWidth: 2
							}
						)
					})
					var ctx = document.getElementById("BgeStatisticChart");
					var myChart = new Chart(ctx, {
							type: 'line',
							data: {
									labels: months,
									datasets: array
							},
							options: {
									scales: {
											yAxes: [{
													ticks: {
															beginAtZero:true
													}
											}]
									}
							}
					});
				}
			});
		})
		</script>

		<div class="AgentFrameR">
			<span>Monthly Accepted Students</span>
			<canvas id="BgeStatisticChart" width="630" height="300"></canvas>
			<div id="line_top_x"></div>
		</div><!-- AgentFrameR -->


		<div class="ListTable">
			<form method="GET">
				<div class="ListSearch Aright">
					<div>
					<select class="SearchSelect" name="new_week" required>
						<option value="">Select Week</option>
						{% for week in week_list%}
                            {% if forloop.counter == 1 and request.GET.new_week == None %}
                                <option value="{{week.0|date:'Y-m-d'}}" selected>{{week.1|date:"Y-m-d"}} ~ {{week.0|date:"Y-m-d"}}</option>
                            {% elif request.GET.new_week == week.0|date:'Y-m-d' %}
                                <option value="{{week.0|date:'Y-m-d'}}" selected>{{week.1|date:"Y-m-d"}} ~ {{week.0|date:"Y-m-d"}}</option>
                            {% else %}
                                <option value="{{week.0|date:'Y-m-d'}}">{{week.1|date:"Y-m-d"}} ~ {{week.0|date:"Y-m-d"}}</option>
                            {% endif %}
						{% endfor %}
					</select>

					<select class="SearchSelect" name="new_day" required>
						<option value="">Select Day</option>
						{% for day in day_list %}
                            {% if forloop.counter == 1 and request.GET.new_week == None %}
						        <option value="{{day|date:'Y-m-d'}}" selected>{{day|date:"Y-m-d"}}</option>
                            {% elif request.GET.new_day == day|date:'Y-m-d' %}
                                <option value="{{day|date:'Y-m-d'}}" selected>{{day|date:"Y-m-d"}}</option>
                            {% else %}
                                <option value="{{day|date:'Y-m-d'}}">{{day|date:"Y-m-d"}}</option>
                            {% endif %}
						{% endfor %}
					</select>

					<select class="SearchSelect" name="new_program">
						<option value="">Select Program</option>
                    {% if request.GET.new_program  == 'k12' %}
                        <option value="k12" selected>Secondary</option>
                        <option value="college">College</option>
                        <option value="camp">Camp</option>
                        <option value="not_specified">Not specified</option>
                    {% elif request.GET.new_program  == 'college' %}
                        <option value="k12">Secondary</option>
                        <option value="college" selected>College</option>
                        <option value="camp">Camp</option>
                        <option value="not_specified">Not specified</option>
                    {% elif request.GET.new_program  == 'camp' %}
                        <option value="k12">Secondary</option>
                        <option value="college">College</option>
                        <option value="camp" selected>Camp</option>
                        <option value="not_specified">Not specified</option>
                    {% elif request.GET.new_program  == 'not_specified' %}
                        <option value="k12">Secondary</option>
                        <option value="college">College</option>
                        <option value="camp">Camp</option>
                        <option value="not_specified" selected>Not specified</option>
                    {% else %}
                        <option value="k12" selected>Secondary</option>
                        <option value="college">College</option>
                        <option value="camp">Camp</option>
                        <option value="not_specified">Not specified</option>
                    {% endif %}
					</select>
					</div>
					<button type="submit" class="ListSearchButton" >Search</button>
				</div>
			</form>
			<table cellpadding="0" cellspacing="0" border="0">
				<colgroup>
					<col width="180">
					<col>
				</colgroup>
				<tr>
					<th>Agent</th>
					<th>New Inquired</th>
					<th>New Applied</th>
					<th>New Accepted</th>
					<th>New Cancelled</th>
					<th>New Enrolled</th>
				</tr>
				{% for head in all_agent_heads %}
				<tr>
					<td>{{head.name}}</td>
					<td>{{head.new_inquired}}</td>
					<td>{{head.new_applied}}</td>
					<td>{{head.new_accepted}}</td>
					<td>{{head.new_cancelled}}</td>
					<td>{{head.new_enrolled}}</td>
				</tr>
				{% endfor %}
				<tr>
					<td class="TitleColor">Total</td>
					<td class="TitleColor">{{new_total_inquired}}</td>
					<td class="TitleColor">{{new_total_applied}}</td>
					<td class="TitleColor">{{new_total_accepted}}</td>
					<td class="TitleColor">{{new_total_cancelled}}</td>
					<td class="TitleColor">{{new_total_enrolled}}</td>
				</tr>
			</table>
		</div><!-- ListTable -->
		<div class="EndPart"></div>
		<div class="cdiv"></div>



		<div class="MTitle">Customer Search</div>
		<div class="ListSearch Aright">
			<form method="GET">
				<div>
				<select class="SearchSelect" name="agent_head" required>
					<option value="">Select Agent</option>
					{% for head in all_agent_heads %}
                        {% if forloop.counter == 1 and request.GET.agent_head == None %}
                            <option value="{{head.id}}" selected>{{head.name}}</option>
                        {% elif request.GET.agent_head == head.id|stringformat:"i" %}
                           <option value="{{head.id}}" selected>{{head.name}}</option>
                        {% else %}
                            <option value="{{head.id}}">{{head.name}}</option>
                        {% endif %}
					{% endfor %}
				</select>
				<select class="SearchSelect" name="customer_program">
					<option value="">Select Program</option>
                {% if request.GET.customer_program  == 'k12' %}
					<option value="k12" selected>Secondary</option>
					<option value="college">College</option>
					<option value="camp">Camp</option>
                {% elif request.GET.customer_program  == 'college' %}
                    <option value="k12">Secondary</option>
					<option value="college" selected>College</option>
					<option value="camp">Camp</option>
                {% elif request.GET.customer_program  == 'camp' %}
                    <option value="k12">Secondary</option>
					<option value="college">College</option>
					<option value="camp" selected>Camp</option>
                {% else %}
                    <option value="k12" selected>Secondary</option>
					<option value="college">College</option>
					<option value="camp" selected>Camp</option>
                {% endif %}
				</select>
				<select class="SearchSelect" name="customer_country">
					<option value="">Select Country</option>
                {% if request.GET.customer_country  == 'korea' %}
					<option value="korea" selected>Korea</option>
					<option value="china">China</option>
					<option value="vietnam">Vietnam</option>
                {% elif request.GET.customer_country  == 'china' %}
                    <option value="korea">Korea</option>
					<option value="china" selected>China</option>
					<option value="vietnam">Vietnam</option>
                {% elif request.GET.customer_country  == 'vietnam' %}
                    <option value="korea">Korea</option>
					<option value="china">China</option>
					<option value="vietnam" selected>Vietnam</option>
                {% else %}
                    <option value="korea">Korea</option>
					<option value="china" selected>China</option>
					<option value="vietnam">Vietnam</option>
                {% endif %}
				</select>
				<select class="SearchSelect" name="customer_search_type">
                {% if request.GET.customer_search_type  == 'name' %}
					<option value="name" selected>Name</option>
					<option value="phone">Phone</option>
					<option value="email">E-mail</option>
                {% elif request.GET.customer_search_type  == 'phone' %}
                    <option value="name">Name</option>
					<option value="phone" selected>Phone</option>
					<option value="email">E-mail</option>
                {% elif request.GET.customer_search_type  == 'email' %}
                    <option value="name">Name</option>
					<option value="phone">Phone</option>
					<option value="email" selected>E-mail</option>
                {% else %}
                    <option value="name" selected>Name</option>
					<option value="phone">Phone</option>
					<option value="email">E-mail</option>
                {% endif %}
				</select>
	        <input type="text" class="SearchInput" style="width:150px;" name="search_input"/>
	        <button type="submit" class="ListSearchButton">Search</button>
				</div>
			</form>
		</div>

		<div class="ListTable">
			<table cellpadding="0" cellspacing="0" border="0">
				<colgroup>
					<col width="180">
					<col>
				</colgroup>
				<tr>
					<th>Agent</th>
					<th>Branch</th>
					<th>Counselor</th>
					<th>Student</th>
					<th>Program</th>
					<th>Country</th>
					<th>Inquired</th>
					<th>Applied</th>
					<th>Accepted</th>
					<th>Cancelled</th>
					<th>Enrolled</th>
					<th>Arrived</th>
				</tr>
				{% for counsel in counsels %}
				<tr>
					<td>{{counsel.counselor.agency.head.name}}</td>
					<td>{{counsel.counselor.agency.name}}</td>
					<td>{{counsel.counselor.user.first_name}} {{counsel.counselor.user.last_name}}</td>
					<td>{{counsel.student.name}}</td>
					<td>{{counsel.program_interested}}</td>
					<td>{{counsel.desire_country|upper}}</td>
					<td>{{counsel.created_at|date:"Y-m-d"}}</td>
					<td>{{counsel.formality.apply_at|date:"Y-m-d"}}</td>
					<td>{{counsel.acceptance_date|date:"Y-m-d"}}</td>
					<td>{{counsel.cancel_enrolment_date|date:"Y-m-d"}}</td>
					<td>{{counsel.i20_received_date|date:"Y-m-d"}}</td>
					<td>{{counsel.formality.air_arrive_date|date:"Y-m-d"}}</td>
				</tr>
				{% endfor %}
			</table>
		</div><!-- ListTable -->
		<div class="ListCounter">
      {% if counsels.has_other_pages %}
        {% for i in counsels.paginator.page_range %}
          {% if counsels.number == i %}
            <span>{{ i }}</span>
          {% else %}
            <a href="{% relative_url i 'page' request.GET.urlencode %}">{{ i }}</a>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>



	</div><!-- MainFrame -->
</div><!--  ContentsFrame-->
{% endblock %}
