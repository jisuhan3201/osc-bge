{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="ContentsFrame">
	<div class="MainAFrame">


		<div class="MTitle">Branches List</div>
		<div class="ListSearch Aright">
			<form method="GET">
			<div>
			From :
			<select class="SearchSelect" name="start_month">
				<option value="">Select Month</option>
			{% if request.GET.start_month  == 'Jan' %}
                <option value="Jan" selected>Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Feb' %}
                <option value="Jan">Jan</option>
                <option value="Feb" selected>Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Mar' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar" selected>Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Apr' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr" selected>Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'May' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May" selected>May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Jun' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun" selected>Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Jul' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul" selected>Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Aug' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug" selected>Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Sep' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep" selected>Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Oct' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct" selected>Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Nov' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov" selected>Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.start_month  == 'Dec' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec" selected>Dec</option>
            {% else %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep" selected>Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% endif %}
			</select>
			&nbsp;&nbsp;
			To :
			<select class="SearchSelect" name="end_month">
				<option value="">Select Month</option>
            {% if request.GET.end_month  == 'Jan' %}
                <option value="Jan" selected>Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Feb' %}
                <option value="Jan">Jan</option>
                <option value="Feb" selected>Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Mar' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar" selected>Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Apr' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr" selected>Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'May' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May" selected>May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Jun' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun" selected>Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Jul' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul" selected>Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Aug' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug" selected>Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Sep' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep" selected>Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Oct' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct" selected>Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Nov' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov" selected>Nov</option>
                <option value="Dec">Dec</option>
            {% elif request.GET.end_month  == 'Dec' %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug">Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec" selected>Dec</option>
            {% else %}
                <option value="Jan">Jan</option>
                <option value="Feb">Feb</option>
                <option value="Mar">Mar</option>
                <option value="Apr">Apr</option>
                <option value="May">May</option>
                <option value="Jun">Jun</option>
                <option value="Jul">Jul</option>
                <option value="Aug" selected>Aug</option>
                <option value="Sep">Sep</option>
                <option value="Oct">Oct</option>
                <option value="Nov">Nov</option>
                <option value="Dec">Dec</option>
            {% endif %}
			</select>
			&nbsp;&nbsp;
			<select class="SearchSelect" name="year" required>
				<option value="">Select year..</option>
				{% for year in year_list %}
                    {% if forloop.counter == 1 and request.GET.year == None %}
                        <option value="{{year}}" selected>{{year}} ~ {{year|add:1}} year</option>
                    {% elif request.GET.year  == year|stringformat:"i" %}
                        <option value="{{year}}" selected>{{year}} ~ {{year|add:1}} year</option>
                    {% else %}
                        <option value="{{year}}">{{year}} ~ {{year|add:1}} year</option>
                    {% endif %}
				{% endfor %}
			</select>
			</div>
			<button type="submit" class="ListSearchButton">Search<button>
		</div>

		<div class="ListTable">
			<table cellpadding="0" cellspacing="0" border="0">
				<colgroup>
					<col>
				</colgroup>
				<tr>
					<th>Branch</th>
					<th>Partner Schools #</th>
					<th>Active Host Families #</th>
					<th>Inactive Host Families #</th>
					<th>Prospective Host Families #</th>
					<th>Current Students #</th>
					<th>Student Complaints #</th>
				</tr>
				{% for branch in all_branches %}
				<tr>
					<td><a href="/branches/statistics/{{branch.id}}">{{branch.name}}</a></td>
					<td>{{branch.partner_school}}</td>
					<td>{{branch.active_hosts}}</td>
					<td>{{branch.inactive_hosts}}</td>
					<td>{{branch.prospective_hosts}}</td>
					<td>{{branch.current_student}}</td>
					<td>{{branch.student_complaints}}</td>
				</tr>
				{% endfor %}
			</table>
		</div><!-- ListTable -->
		<div class="EndPart"></div>

		<script>
            var select = document.getElementById('item_name');

			$.ajax({                       // initialize an AJAX request
			  url: "/charts/branches/statistics",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
			  success: function (data) {   // `data` is the return of the `load_cities` view function
			    var array = []
			    data.forEach(function(element){
			      var random_color = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' +
			      (Math.floor(Math.random() * 256)) + ',' +
			      (Math.floor(Math.random() * 256))
			      array.push(
			        {
			          label: element.branch,
			          data: element.data,
			          backgroundColor: random_color + ',0.6' + ')',
			          borderColor : random_color + ',1' + ')',
			        }
			      )
			    })
			    var ctx = document.getElementById("BranchStatisticChart");
			    var myChart = new Chart(ctx, {
			        type: 'bar',
			        data: {
			            labels: ["Partner Schools", "Active Host Families", "Inactive Host Families", "Prospective Host Families", "Current Students", "Student Complaints"],
			            datasets: array
			        },
			        options: {
			            scales: {
			                yAxes: [{
			                    ticks: {
			                        beginAtZero:true
			                    }
			                }]
			            }
			        }
			    });
			  }
			});
		</script>


		<div class="GraphgArea">
			<canvas id="BranchStatisticChart" width="636" height="300"></canvas>
		</div>
	</div><!-- MainAFrame -->
</div><!--  ContentsFrame-->
{% endblock %}
